<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7Cho Food</title>
    <link rel="icon" type="image/x-icon" href="images/logo.jpg">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body onclick="closeModalOutside(event)">
    <div id="app-container" class="container">
        <!-- Khu v·ª±c ADMIN -->
        <div id="admin-panel" class="admin-layout" style="display: none;">
            <div class="sidebar">
                <div class="sidebar-header">
                    <a href="index.html?role=admin">
                        <img src="images/logo.jpg" alt="7Cho Food Admin Logo"><br>
                        7Cho Food
                    </a>
                </div>
                <ul>
                    <li><a href="#" data-tab="dashboard" class="admin-tab active"><i class="fas fa-tachometer-alt"></i> Trang t·ªïng quan</a></li>
                    <li><a href="#" data-tab="user-management" class="admin-tab"><i class="fas fa-users"></i> Kh√°ch h√†ng</a></li>
                    <li><a href="#" data-tab="category-management" class="admin-tab"><i class="fas fa-tags"></i> Lo·∫°i s·∫£n ph·∫©m</a></li>
                    <li><a href="#" data-tab="product-management" class="admin-tab"><i class="fas fa-boxes"></i> S·∫£n ph·∫©m</a></li>
                    <li><a href="#" data-tab="import-management" class="admin-tab"><i class="fas fa-truck-loading"></i> Nh·∫≠p h√†ng</a></li>
                    <li><a href="#" data-tab="price-management" class="admin-tab"><i class="fas fa-dollar-sign"></i> Gi√° b√°n</a></li>
                    <li><a href="#" data-tab="order-management" class="admin-tab"><i class="fas fa-clipboard-list"></i> ƒê∆°n h√†ng</a></li>
                    <li><a href="#" data-tab="inventory-management" class="admin-tab"><i class="fas fa-warehouse"></i> T·ªìn kho</a></li>
                    <li><a href="#" onclick="logout()" style="color: #e74c3c;"><i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t</a></li>
                </ul>
            </div>

            <div class="main-content">
                <div id="dashboard" class="tab-content active">
                    <h3>üìä T·ªïng quan H·ªá th·ªëng</h3>
                    <div class="dashboard-cards">
                        <div class="card">
                            <h4>T·ªïng Kh√°ch h√†ng</h4>
                            <p id="total-users">0</p>
                        </div>
                        <div class="card">
                            <h4>T·ªïng S·∫£n ph·∫©m</h4>
                            <p id="total-products">0</p>
                        </div>
                        <div class="card">
                            <h4>T·ªïng ƒê∆°n h√†ng</h4>
                            <p id="total-orders">0</p>
                        </div>
                        <div class="card">
                            <h4>T·ªïng Doanh thu</h4>
                            <p id="total-revenue">0 VND</p>
                        </div>
                    </div>
                </div>

                <div id="user-management" class="tab-content">
                    <h3>üë• Qu·∫£n l√Ω Kh√°ch h√†ng</h3>
                    <div class="filter-section">
                        <div class="search-input-wrapper"> 
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="user-search-query" placeholder="T√¨m ki·∫øm theo T√™n, Email..." oninput="searchUsers()">
                        </div>
                        <button class="btn btn-secondary" onclick="loadUsers()" title="T·∫£i l·∫°i danh s√°ch">
                            <i class="fas fa-sync-alt"></i> 
                        </button>
                    </div>
                    <div class="data-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>T√™n KH</th>
                                    <th>Email</th>
                                    <th>SƒêT</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="user-list"></tbody>
                        </table>
                    </div>
                </div>

                <div id="category-management" class="tab-content">
                    <h3>Qu·∫£n l√Ω Lo·∫°i S·∫£n ph·∫©m</h3>
                    <div class="filter-section">
                        <div class="input-group" style="display: flex; gap: 10px;">
                            <input type="text" id="new-category-name" placeholder="Nh·∫≠p t√™n lo·∫°i s·∫£n ph·∫©m m·ªõi" style="flex-grow: 1; padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
                            <button class="btn btn-success" onclick="addCategory()">
                                <i class="fas fa-plus"></i> Th√™m m·ªõi
                            </button>
                        </div>
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>T√™n Lo·∫°i</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="category-list">
                            </tbody>
                    </table>
                </div>

                <div id="edit-category-modal" class="modal">
                    <div class="modal-content">
                        <h4>S·ª≠a Lo·∫°i S·∫£n ph·∫©m</h4>
                        <input type="hidden" id="edit-category-id">
                        <input type="text" id="edit-category-name" placeholder="T√™n lo·∫°i s·∫£n ph·∫©m" style="width: 100%; padding: 10px; margin: 10px 0;">
                        <div style="text-align: right;">
                            <button class="btn btn-secondary" onclick="closeModal('edit-category-modal')">H·ªßy</button>
                            <button class="btn btn-success" onclick="saveCategory()">L∆∞u</button>
                        </div>
                    </div>
                </div>

                <div id="product-management" class="tab-content">
                    <h3>üì¶ Qu·∫£n l√Ω S·∫£n ph·∫©m</h3>
                    <div class="filter-section" style="display: flex; justify-content: space-between; align-items: center;">
                        
                        <div class="admin-search-bar" style="display: flex; gap: 10px; flex-grow: 1; max-width: 600px; margin-right: 20px;">
                            
                            <input type="text" id="admin-product-search" 
                                placeholder="T√¨m ki·∫øm theo T√™n ho·∫∑c M√£ SP..." 
                                oninput="searchAdminProducts()" 
                                style="flex-grow: 1; padding: 10px; border-radius: 20px; border: 1px solid #ccc;">
                                
                            <select id="admin-category-filter" onchange="searchAdminProducts()" 
                                    style="padding: 10px; border-radius: 20px; border: 1px solid #ccc;">
                                <option value="all">T·∫•t c·∫£ Lo·∫°i</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-success" onclick="openProductModal('add')">
                            <i class="fas fa-plus"></i> Th√™m S·∫£n ph·∫©m
                        </button>
                    </div>
                    <div id="admin-product-list" class="admin-product-grid">
                    </div>
                    <div class="pagination admin-pagination" style="display: none; justify-content: center; align-items: center; gap: 10px; margin-top: 30px;">
                        <button class="btn btn-warning" id="admin-prev-page">Trang tr∆∞·ªõc</button>
                        <span id="admin-page-info" style="padding: 0 15px;">Trang 1 / 1</span>
                        <button class="btn btn-warning" id="admin-next-page">Trang sau</button>
                    </div>
                </div>

                <div id="product-modal" class="modal" onclick="closeModalOutside(event)">
                    <div class="modal-content" style="max-width: 750px;">
                        <span class="close-btn" onclick="closeModal('product-modal')">&times;</span>
                        <h4 id="product-modal-title">Th√™m S·∫£n ph·∫©m M·ªõi</h4>
                        
                        <div class="modal-product-body" style="display: flex; gap: 30px;"> 
                            <div class="modal-product-form" style="flex-basis: 70%;">
                                
                                <div class="filter-section" style="box-shadow: none; padding: 10px 0;">
                                    <input type="hidden" id="product-id">
                                    
                                    <div class="filter-row">
                                        <div class="filter-group"><label>T√™n S·∫£n ph·∫©m:</label><input type="text" id="product-name" required></div>
                                        <div class="filter-group"><label>M√£ S·∫£n ph·∫©m (ID):</label><input type="text" id="product-code" placeholder="V√≠ d·ª•: SP061" required></div>
                                    </div>
                                    
                                    <div class="filter-row">
                                        <div class="filter-group">
                                            <label>Lo·∫°i S·∫£n ph·∫©m (Category):</label>
                                            <select id="product-category" required></select>
                                        </div>
                                        <div class="filter-group">
                                            <label>Lo·∫°i chung (Type):</label>
                                            <select id="product-type" required>
                                                <option value="M√≥n ch√≠nh">M√≥n ch√≠nh</option><option value="M√≥n nh·∫π">M√≥n nh·∫π</option>
                                                <option value="ƒê·ªì u·ªëng">ƒê·ªì u·ªëng</option><option value="M√≥n khai v·ªã">M√≥n khai v·ªã</option>
                                                <option value="M√≥n k√®m">M√≥n k√®m</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="filter-row">
                                        <div class="filter-group"><label>Gi√° V·ªën (Cost - VND):</label><input type="number" id="product-cost" min="0" required></div>
                                        <div class="filter-group">
                                            <label>% L·ª£i nhu·∫≠n (T√πy ch·ªânh):</label>
                                            <input type="number" id="product-customMargin" placeholder="ƒê·ªÉ tr·ªëng ƒë·ªÉ d√πng % chung" min="0">
                                        </div>
                                    </div>
                                
                                    <div class="filter-row">
                                        <div class="filter-group"><label>S·ªë l∆∞·ª£ng T·ªìn kho:</label><input type="number" id="product-stock" min="0" required></div>
                                        <div class="filter-group"><label>Ng∆∞·ª°ng c·∫£nh b√°o t·ªìn kho th·∫•p:</label><input type="number" id="product-lowStockThreshold" min="1" required></div>
                                    </div>
                                    
                                    <div class="filter-row" style="flex-direction: column;">
                                        <div class="filter-group" style="margin-top: 15px;">
                                            <label>M√¥ t·∫£:</label>
                                            <textarea id="product-description" rows="3" required></textarea>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                
                            <div class="modal-product-preview" style="flex-basis: 30%; text-align: center; padding-top: 10px;">
                                <label>Xem tr∆∞·ªõc ·∫¢nh:</label>
                                <img id="image-preview" src="https://placehold.co/200x200/cccccc/ffffff?text=No+Image" alt="Xem tr∆∞·ªõc ·∫£nh" style="width: 100%; max-width: 200px; height: auto; object-fit: cover; border-radius: 8px; margin-top: 10px; border: 1px solid #ddd; box-shadow: 0 2px 5px rgba(0,0,0,0.1);" />
                                <div id="product-image-upload-wrapper" style="margin-top: 15px; position: relative; overflow: hidden; display: inline-block; cursor: pointer;">
        
                                    <button class="btn btn-info btn-sm" type="button" style="cursor: pointer;">
                                        <i class="fas fa-camera"></i> Ch·ªçn ·∫¢nh M·ªõi
                                    </button>
                                    
                                    <input type="file" 
                                           id="product-image-file" 
                                           accept="image/*" 
                                           onchange="previewProductImage(this.files[0])" 
                                           style="position: absolute; top: 0; left: 0; opacity: 0; cursor: pointer; height: 100%; width: 100%;" />
                                </div>
                                <input type="hidden" id="product-image-url-current">
                            </div>
                            
                        </div>
                        
                        <div style="text-align: right; margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="closeModal('product-modal')">H·ªßy</button>
                            <button class="btn btn-success" id="save-product-btn" onclick="saveProduct()">Th√™m</button>
                        </div>
                    </div>
                </div>
                
                <div id="import-management" class="tab-content">
                    <h3>üì• Qu·∫£n l√Ω Phi·∫øu nh·∫≠p h√†ng</h3>
                    <div class="filter-section">
                        <button class="btn btn-success" onclick="openAddImportModal()">
                            <i class="fas fa-plus"></i> Th√™m Phi·∫øu nh·∫≠p m·ªõi
                        </button>
                    </div>
                    <div class="data-table">
                        <table>
                            <thead>
                                <tr><th>M√£ PN</th><th>Ng√†y nh·∫≠p</th><th>T·ªïng ti·ªÅn</th><th>Tr·∫°ng th√°i</th><th>Thao t√°c</th></tr>
                            </thead>
                            <tbody id="import-list"></tbody>
                        </table>
                    </div>
                </div>
                <div id="import-detail-modal" class="modal" onclick="closeModalOutside(event)">
                    <div class="modal-content" style="max-width: 650px;">
                        <span class="close-btn" onclick="closeModal('import-detail-modal')">&times;</span>
                        <h4 id="import-modal-title">Chi ti·∫øt Phi·∫øu nh·∫≠p</h4>
                        
                        <div id="import-modal-body" class="data-table" style="padding: 10px; margin-top: 15px;">
                            </div>
                        
                        <div style="text-align: right; margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="closeModal('import-detail-modal')">ƒê√≥ng</button>
                        </div>
                    </div>
                </div>
                <div id="update-import-status-modal" class="modal" onclick="closeModalOutside(event)">
                    <div class="modal-content" style="max-width: 400px;">
                        <span class="close-btn" onclick="closeModal('update-import-status-modal')">&times;</span>
                        <h4>C·∫≠p nh·∫≠t Tr·∫°ng th√°i Phi·∫øu nh·∫≠p</h4>
                        
                        <p>M√£ Phi·∫øu: <strong id="update-import-id-display"></strong></p>
                        <p>Tr·∫°ng th√°i hi·ªán t·∫°i: <span id="current-import-status-display" class="status-badge status-warning">ƒêang giao</span></p>
                
                        <div class="filter-group" style="margin-top: 20px;">
                            <label for="new-import-status">Ch·ªçn Tr·∫°ng th√°i M·ªõi:</label>
                            <select id="new-import-status" style="width: 100%; padding: 8px; border-radius: 4px;">
                                <option value="ƒê√£ nh·∫≠p">ƒê√£ nh·∫≠p</option>
                                <option value="ƒêang giao">ƒêang giao</option>
                                <option value="ƒê√£ h·ªßy">ƒê√£ h·ªßy</option>
                            </select>
                        </div>
                
                        <div style="text-align: right; margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="closeModal('update-import-status-modal')">H·ªßy</button>
                            <button class="btn btn-primary" onclick="updateImportStatusFromModal()">L∆∞u Tr·∫°ng th√°i</button>
                        </div>
                    </div>
                </div>
                <div id="add-import-modal" class="modal" onclick="closeModalOutside(event)">
                    <div class="modal-content" style="max-width: 850px;">
                        <span class="close-btn" onclick="closeModal('add-import-modal')">&times;</span>
                        <h4 id="add-import-modal-title">Th√™m Phi·∫øu nh·∫≠p H√†ng M·ªõi</h4>
                        
                        <div class="modal-import-body">
                            
                            <div class="filter-section" style="box-shadow: none; padding: 10px 0;">
                                <h5 style="color: #2980b9; margin-bottom: 10px;">Th√¥ng tin Chung</h5>
                                <div class="filter-row">
                                    <div class="filter-group"><label>M√£ Phi·∫øu nh·∫≠p:</label><input type="text" id="import-id" placeholder="PN2025xxx" required disabled></div>
                                    <div class="filter-group"><label>Ng√†y Nh·∫≠p:</label><input type="date" id="import-date" value="${new Date().toISOString().slice(0, 10)}" required></div>
                                </div>
                                <p style="text-align: right; font-weight: bold; font-size: 1.1em;">T·ªïng ti·ªÅn (D·ª± ki·∫øn): <span id="import-total-display" style="color: #E74C3C;">0 ƒë</span></p>
                            </div>
            
                            <div class="filter-section" style="margin-top: 20px; box-shadow: none; padding: 10px 0;">
                                <h5 style="color: #2980b9; margin-bottom: 10px;">Chi ti·∫øt S·∫£n ph·∫©m</h5>
                                <div class="filter-row" style="align-items: flex-end; border: 1px dashed #ccc; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                    <div class="filter-group"><label>Ch·ªçn S·∫£n ph·∫©m:</label><select id="import-product-select" required></select></div>
                                    <div class="filter-group"><label>S·ªë l∆∞·ª£ng Nh·∫≠p:</label><input type="number" id="import-qty" min="1" value="1" required></div>
                                    <div class="filter-group"><label>Gi√° V·ªën Nh·∫≠p (m·ªói SP):</label><input type="number" id="import-cost" min="0" placeholder="Gi√° v·ªën" required></div>
                                    <button class="btn btn-primary" onclick="addImportItem()">Th√™m v√†o Phi·∫øu</button>
                                </div>
            
                                <div class="data-table">
                                    <table>
                                        <thead><tr><th>M√£ SP</th><th>T√™n SP</th><th>SL</th><th>Gi√° V·ªën</th><th>Th√†nh ti·ªÅn</th><th>Thao t√°c</th></tr></thead>
                                        <tbody id="import-items-list"></tbody>
                                    </table>
                                </div>
                            </div>
            
                        </div>
                        
                        <div style="text-align: right; margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="closeModal('add-import-modal')">H·ªßy</button>
                            <button class="btn btn-success" onclick="saveNewImport()">L∆∞u Phi·∫øu nh·∫≠p</button>
                        </div>
                    </div>
                </div>

                <div id="price-management" class="tab-content">
                    <h3>üí≤ Qu·∫£n l√Ω Gi√° b√°n & T·ªâ l·ªá L·ª£i nhu·∫≠n</h3>
                    <div class="filter-section">
                        <h4>Thi·∫øt l·∫≠p T·ªâ l·ªá l·ª£i nhu·∫≠n (%)</h4>
                        <div class="filter-row">
                            <div class="filter-group">
                                <label>Lo·∫°i S·∫£n ph·∫©m:</label>
                                <select id="price-type-select"><option>M√≥n ch√≠nh</option></select>
                            </div>
                            <div class="filter-group">
                                <label>% L·ª£i nhu·∫≠n:</label>
                                <input type="number" id="price-margin-input" placeholder="V√≠ d·ª•: 15" min="0">
                            </div>
                            <button class="btn btn-primary" onclick="updatePriceManagement()">C·∫≠p nh·∫≠t</button>
                        </div>
                    </div>
                    <div class="data-table" style="margin-top: 30px;">
                        <h4>Tra c·ª©u Gi√° b√°n S·∫£n ph·∫©m</h4>
                        <table>
                            <thead>
                                <tr><th>M√£ SP</th><th>T√™n SP</th><th>Gi√° v·ªën</th><th>% L·ª£i nhu·∫≠n</th><th>Gi√° b√°n</th><th>Thao t√°c</th></tr>
                            </thead>
                            <tbody id="price-list"></tbody>
                        </table>
                    </div>
                </div>
                <div id="edit-margin-modal" class="modal" onclick="closeModalOutside(event)">
                    <div class="modal-content" style="max-width: 450px;">
                        <span class="close-btn" onclick="closeModal('edit-margin-modal')">&times;</span>
                        <h4>S·ª≠a T·ªâ l·ªá L·ª£i nhu·∫≠n</h4>
                        
                        <input type="hidden" id="edit-margin-product-id">
                        <p>S·∫£n ph·∫©m: <strong id="edit-margin-product-name"></strong></p>
                        <p>Gi√° v·ªën hi·ªán t·∫°i: <span id="edit-margin-product-cost"></span></p>
            
                        <div class="filter-group" style="margin-top: 20px;">
                            <label>T·ªâ l·ªá L·ª£i nhu·∫≠n M·ªõi (%):</label>
                            <input type="number" id="edit-margin-value" min="0" placeholder="V√≠ d·ª•: 20">
                        </div>
            
                        <div style="text-align: right; margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="closeModal('edit-margin-modal')">H·ªßy</button>
                            <button class="btn btn-success" onclick="saveProductCustomMargin()">L∆∞u & C·∫≠p nh·∫≠t Gi√°</button>
                        </div>
                    </div>
                </div>
                
                <div id="order-management" class="tab-content">
                    <h3>üìú Qu·∫£n l√Ω ƒê∆°n ƒë·∫∑t h√†ng</h3>
                    <div class="filter-section">
                        <div class="filter-row" style="align-items: flex-end; gap: 20px;">
                            <div class="filter-group">
                                <label for="order-start-date">Ng√†y ƒë·∫∑t t·ª´:</label>
                                <input type="date" id="order-start-date" onchange="filterAdminOrders()">
                            </div>
                            <div class="filter-group">
                                <label for="order-end-date">ƒê·∫øn ng√†y:</label>
                                <input type="date" id="order-end-date" onchange="filterAdminOrders()">
                            </div>
                            <div class="filter-group">
                                <label for="order-status-filter">T√¨nh tr·∫°ng ƒê∆°n h√†ng:</label>
                                <select id="order-status-filter" onchange="filterAdminOrders()">
                                    <option value="all">T·∫•t c·∫£</option>
                                    <option value="new">M·ªõi ƒë·∫∑t</option>
                                    <option value="processing">ƒêang x·ª≠ l√Ω</option>
                                    <option value="delivered">ƒê√£ giao</option>
                                    <option value="cancelled">ƒê√£ h·ªßy</option>
                                </select>
                            </div>
                            <button class="btn btn-secondary" onclick="resetOrderFilters()">X√≥a B·ªô l·ªçc</button>
                        </div>
                    </div>
                    <div class="data-table">
                        <table>
                            <thead>
                                <tr><th>M√£ ƒêH</th><th>Ng√†y ƒë·∫∑t</th><th>Kh√°ch h√†ng</th><th>T·ªïng ti·ªÅn</th><th>T√¨nh tr·∫°ng</th><th>Thao t√°c</th></tr>
                            </thead>
                            <tbody id="admin-order-list">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="admin-order-detail-modal" class="modal" onclick="closeModalOutside(event)">
                    <div class="modal-content" style="max-width: 800px;">
                        <span class="close-btn" onclick="closeModal('admin-order-detail-modal')">&times;</span>
                        
                        <h4 id="order-modal-title">Chi ti·∫øt ƒê∆°n h√†ng <span id="order-id-display" style="color: #E74C3C;"></span></h4>
                        
                        <div id="order-detail-summary" style="margin-bottom: 20px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9;">
                            </div>
                
                        <div class="data-table">
                            <h5 style="padding: 10px 0; font-weight: 600;">Danh s√°ch S·∫£n ph·∫©m</h5>
                            <table>
                                <thead><tr><th>T√™n SP</th><th>SL</th><th>Gi√°</th><th>Th√†nh ti·ªÅn</th></tr></thead>
                                <tbody id="order-products-list">
                                </tbody>
                            </table>
                        </div>
                
                        <div style="text-align: right; margin-top: 20px;">
                            <p style="font-size: 1.2em; font-weight: bold;">T·ªïng ti·ªÅn: <span id="order-total-display" style="color: #E74C3C;">0 ƒë</span></p>
                            <div style="margin-top: 15px;">
                                <button class="btn btn-primary" onclick="openUpdateOrderStatusModal('${order.id}')">C·∫≠p nh·∫≠t Tr·∫°ng th√°i</button>
                                <button class="btn btn-secondary" onclick="closeModal('admin-order-detail-modal')">ƒê√≥ng</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="update-order-status-modal" class="modal" onclick="closeModalOutside(event)">
                    <div class="modal-content" style="max-width: 400px;">
                        <span class="close-btn" onclick="closeModal('update-order-status-modal')">&times;</span>
                        <h4>C·∫≠p nh·∫≠t Tr·∫°ng th√°i ƒê∆°n h√†ng</h4>
                
                        <p>M√£ ƒê∆°n h√†ng: <strong id="update-order-id-display"></strong></p>
                        <p>Tr·∫°ng th√°i hi·ªán t·∫°i: <span id="current-order-status-display" class="status-badge status-warning"></span></p>
                
                        <div class="filter-group" style="margin-top: 20px;">
                            <label for="new-order-status">Ch·ªçn Tr·∫°ng th√°i M·ªõi:</label>
                            <select id="new-order-status" style="width: 100%; padding: 8px; border-radius: 4px;">
                                <option value="M·ªõi ƒë·∫∑t">M·ªõi ƒë·∫∑t</option>
                                <option value="ƒêang x·ª≠ l√Ω">ƒêang x·ª≠ l√Ω</option>
                                <option value="ƒê√£ giao">ƒê√£ giao</option>
                                <option value="ƒê√£ h·ªßy">ƒê√£ h·ªßy</option>
                            </select>
                        </div>
                
                        <div style="text-align: right; margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="closeModal('update-order-status-modal')">H·ªßy</button>
                            <button class="btn btn-primary" onclick="updateOrderStatusFromModal(true)">L∆∞u Tr·∫°ng th√°i</button>
                        </div>
                    </div>
                </div>

                <div id="inventory-management" class="tab-content">
                    <h3>üì¶ Qu·∫£n l√Ω T·ªìn kho</h3>
                    <div class="filter-section">
                        <div class="filter-row" style="align-items: flex-end; gap: 20px;">
                            <div class="filter-group" style="flex-grow: 1;">
                                <input type="text" id="inventory-search-query" 
                                    placeholder="T√¨m ki·∫øm theo T√™n ho·∫∑c M√£ SP..." 
                                    oninput="searchInventory()" 
                                    style="width: 100%; padding: 10px; border-radius: 20px; border: 1px solid #ccc; box-sizing: border-box;">
                            </div>
                            <div class="filter-group" style="flex-grow: 0; min-width: 150px;">
                                <select id="inventory-category-filter" onchange="searchInventory()" 
                                        style="padding: 10px; border-radius: 20px; border: 1px solid #ccc; width: 100%;">
                                    <option value="all">T·∫•t c·∫£ Lo·∫°i</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="inventory-start-date">Ng√†y giao d·ªãch t·ª´:</label>
                                <input type="date" id="inventory-start-date" onchange="searchInventory()">
                            </div>
                            <div class="filter-group">
                                <label for="inventory-end-date">ƒê·∫øn ng√†y:</label>
                                <input type="date" id="inventory-end-date" onchange="searchInventory()">
                            </div>
                            <button class="btn btn-secondary" onclick="resetInventoryFilters()" title="X√≥a B·ªô l·ªçc">
                                <i class="fas fa-sync-alt"></i> 
                            </button>
                        </div>
                    </div>
                    <div class="filter-section">
                        <div id="low-stock-alert" class="alert alert-warning" style="display: none;"></div>
                    </div>
                    <div class="data-table">
                        <table>
                            <thead>
                                <tr><th>M√£ SP</th><th>T√™n SP</th><th>Lo·∫°i</th><th>S·ªë l∆∞·ª£ng T·ªìn</th><th>Tr·∫°ng th√°i</th><th>Thao t√°c</th></tr>
                            </thead>
                            <tbody id="inventory-list">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Khu v·ª±c CLIENT -->
        <div id="client-panel" class="client-layout">
            <header class="client-header">
                <div class="logo">
                    <a href="#" onclick="setActiveView('home'); filterByCategory('all', false, event);">
                        <img src="images/logo.jpg" alt="7Cho Food Logo">7Cho Food
                    </a>
                </div>

                <div class="header-search">
                    <input type="text" id="search-name" placeholder="T√¨m ki·∫øm m√≥n ƒÉn..." oninput="searchProducts()">
                    <select id="search-category" onchange="searchProducts()">
                        <option value="all">T·∫•t c·∫£ danh m·ª•c</option>
                        <option value="M√≥n m·∫∑n">M√≥n m·∫∑n</option>
                        <option value="M√≥n chay">M√≥n chay</option>
                        <option value="M√≥n l·∫©u">M√≥n l·∫©u</option>
                        <option value="M√≥n ƒÉn v·∫∑t">M√≥n ƒÉn v·∫∑t</option>
                        <option value="M√≥n tr√°ng mi·ªáng">M√≥n tr√°ng mi·ªáng</option>
                        <option value="N∆∞·ªõc u·ªëng">N∆∞·ªõc u·ªëng</option>
                    </select>
                    
                    <input type="number" id="search-price-min" placeholder="Gi√° t·ª´" oninput="searchProducts()" style="width: 100px;">
                    <input type="number" id="search-price-max" placeholder="Gi√° ƒë·∫øn" oninput="searchProducts()" style="width: 100px;">
                </div>
                
                <nav>
                    <a href="#" data-view="cart" onclick="showCartModal()">üõí Gi·ªè h√†ng (<span id="cart-count">0</span>)</a>
                    <div class="nav-dropdown">
                        <a href="#" id="user-info">üë§ T√†i kho·∫£n</a>
                        <div class="dropdown-content">
                            <a href="#" id="opt-login" onclick="showAuthModal('login', event)">ƒêƒÉng nh·∫≠p</a>
                            <a href="#" id="opt-register" onclick="showAuthModal('register', event)">ƒêƒÉng k√Ω</a>
                            <a href="#" id="opt-profile" onclick="setActiveView('profile')" style="display:none;">Qu·∫£n l√Ω T√†i kho·∫£n</a>
                            <a href="#" id="opt-logout" onclick="clientLogout(event)" style="display:none;">ƒêƒÉng xu·∫•t</a>
                        </div>
                    </div>
                </nav>
            </header>
            
            <!-- KH·ªêI B·ªê C·ª§C CH√çNH (SIDEBAR + CONTENT) -->
            <div class="main-client-layout">
                <div id="category-nav" class="category-sidebar">
                    <a href="#" class="category-link active" data-category="all" onclick="filterByCategory('all', true, event)">Trang ch·ªß</a>
                    <a href="#" class="category-link" data-category="M√≥n chay" onclick="filterByCategory('M√≥n chay', true, event)">M√≥n chay</a>
                    <a href="#" class="category-link" data-category="M√≥n m·∫∑n" onclick="filterByCategory('M√≥n m·∫∑n', true, event)">M√≥n m·∫∑n</a>
                    <a href="#" class="category-link" data-category="M√≥n l·∫©u" onclick="filterByCategory('M√≥n l·∫©u', true, event)">M√≥n l·∫©u</a>
                    <a href="#" class="category-link" data-category="M√≥n ƒÉn v·∫∑t" onclick="filterByCategory('M√≥n ƒÉn v·∫∑t', true, event)">M√≥n ƒÉn v·∫∑t</a>
                    <a href="#" class="category-link" data-category="M√≥n tr√°ng mi·ªáng" onclick="filterByCategory('M√≥n tr√°ng mi·ªáng', true, event)">M√≥n tr√°ng mi·ªáng</a>
                    <a href="#" class="category-link" data-category="N∆∞·ªõc u·ªëng" onclick="filterByCategory('N∆∞·ªõc u·ªëng', true, event)">N∆∞·ªõc u·ªëng</a>
                </div>

                <div class="client-content-area">
                    <div id="home" class="client-view active">
                        <div id="hero-banner" class="slideshow-container"> 
    
                            <div class="mySlides fade active-slide">
                                <div class="slide-content">
                                    <h2>∆Øu ƒë√£i M√≥n ngon m·ªói ng√†y!</h2>
                                    <p>Gi·∫£m 15% t·∫•t c·∫£ Ph·ªü B√≤ ƒê·∫∑c Bi·ªát v√† B√∫n Ri√™u Cua khi ƒë·∫∑t tr∆∞·ªõc 10h s√°ng.</p>
                                    <button class="btn btn-success" onclick="document.querySelector('#product-grid-section').scrollIntoView({behavior: 'smooth'})">Xem Menu Ngay</button>
                                </div>
                                </div>
                            
                            <div class="mySlides fade">
                                <div class="slide-content">
                                    <h2>üî• Gi·∫£m 20% c√°c m√≥n L·∫©u!</h2>
                                    <p>ƒê·∫∑t L·∫©u Th√°i chua cay ho·∫∑c L·∫©u N·∫•m t·∫°i nh√†, t·∫∑ng k√®m 1 chai n∆∞·ªõc ng·ªçt.</p>
                                    <button class="btn btn-warning" onclick="filterByCategory('M√≥n l·∫©u', true)">ƒê·∫∑t L·∫©u Ngay</button>
                                </div>
                            </div>
                            
                            <div class="mySlides fade">
                                <div class="slide-content">
                                    <h2>üå± Th·ª±c ƒë∆°n Thu·∫ßn Chay</h2>
                                    <p>Kh√°m ph√° c√°c m√≥n ƒÉn chay m·ªõi t·ª´ nguy√™n li·ªáu h·ªØu c∆°, thanh ƒë·∫°m, t·ªët cho s·ª©c kh·ªèe.</p>
                                    <button class="btn btn-primary" onclick="filterByCategory('M√≥n chay', true)">Xem M√≥n Chay</button>
                                </div>
                            </div>
                        
                            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                            <a class="next" onclick="plusSlides(1)">&#10095;</a>
                            
                            <div class="dots-container">
                                <span class="dot active" onclick="currentSlide(1)"></span> 
                                <span class="dot" onclick="currentSlide(2)"></span> 
                                <span class="dot" onclick="currentSlide(3)"></span> 
                            </div>
                        </div>
                        <div id="service-cards">
                            <div class="service-card">
                                <i class="fa-solid fa-truck-fast"></i>
                                <h4>Giao h√†ng si√™u t·ªëc</h4>
                                <p>ƒê·∫£m b·∫£o m√≥n ƒÉn n√≥ng s·ªët trong 30 ph√∫t.</p>
                            </div>
                            <div class="service-card">
                                <i class="fa-solid fa-utensils"></i>
                                <h4>Nguy√™n li·ªáu t∆∞∆°i s·∫°ch</h4>
                                <p>ƒê·ªì ƒÉn ƒë∆∞·ª£c ch·∫ø bi·∫øn t·ª´ n√¥ng s·∫£n h·ªØu c∆°.</p>
                            </div>
                            <div class="service-card">
                                <i class="fa-solid fa-headset"></i>
                                <h4>H·ªó tr·ª£ 24/7</h4>
                                <p>ƒê·ªôi ng≈© chƒÉm s√≥c kh√°ch h√†ng lu√¥n s·∫µn s√†ng.</p>
                            </div>
                        </div>

                        <div id="product-grid-section">
                            <h3>Th·ª±c ƒë∆°n H√¥m nay</h3>
                            <div id="product-grid" class="product-grid">
                            </div>
                            <div class="pagination">
                                <button class="btn btn-warning" id="client-prev-page" onclick="changePage('prev')">Trang tr∆∞·ªõc</button>
                                <span id="client-page-info" style="padding: 0 15px;">Trang 1 / 1</span>
                                <button class="btn btn-warning" id="client-next-page" onclick="changePage('next')">Trang sau</button>
                            </div>
                        </div>
                    </div>

                    <footer class="client-footer">
                        <div class="footer-section contact-info">
                            <h4>Li√™n h·ªá</h4>
                            <p><i class="fas fa-map-marker-alt"></i> 123 ƒê∆∞·ªùng 7Cho, Qu·∫≠n 1, TP.HCM</p>
                            <p><i class="fas fa-phone"></i> 090-123-4567</p>
                            <p><i class="fas fa-envelope"></i> hotro@7chofood.vn</p>
                        </div>
                        <div class="footer-section links">
                            <h4>Ch√≠nh s√°ch</h4>
                            <ul>
                                <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                                <li><a href="#">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
                                <li><a href="#">Ch√≠nh s√°ch giao h√†ng</a></li>
                            </ul>
                        </div>
                        <div class="footer-section social">
                            <h4>Theo d√µi ch√∫ng t√¥i</h4>
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-youtube"></i></a>
                        </div>
                        <div class="footer-bottom">
                            <p>&copy; 2025 7Cho Food. ƒê√£ ƒëƒÉng k√Ω b·∫£n quy·ªÅn.</p>
                        </div>
                    </footer>

                    <div id="checkout" class="client-view">
                        <header id="checkout-header">
                            <span id="checkout-back-btn" onclick="backToHomeFromCheckout()">
                                <i class="fas fa-arrow-left"></i>
                            </span>
                            <h3 style="margin: 0; font-size: 1.8em; color: #E74C3C;">Thanh to√°n ƒê∆°n h√†ng</h3>
                        </header>
                        
                        <div class="checkout-layout">
                            <div class="checkout-left-column">    
                                <div class="filter-section">
                                    <h4 style="color: #E74C3C; margin-bottom: 15px;">Th√¥ng tin Ng∆∞·ªùi nh·∫≠n</h4>
                                    <div class="filter-row" style="flex-direction: column;">
                                        <div class="filter-group" style="min-width: 100%;">
                                            <label for="delivery-address-type">Ch·ªçn ƒê·ªãa ch·ªâ Giao h√†ng:</label>
                                            <select id="delivery-address-type" onchange="toggleNewAddressInput(this.value)">
                                                <option value="account-default">S·ª≠ d·ª•ng ƒê·ªãa ch·ªâ T·ª´ T√†i kho·∫£n</option>
                                                <option value="new-address">Nh·∫≠p ƒê·ªãa ch·ªâ Giao h√†ng M·ªöI</option>
                                            </select>
                                        </div>
                                        
                                        <div class="filter-group">
                                            <label for="checkout-name">H·ªç v√† T√™n Ng∆∞·ªùi nh·∫≠n:</label>
                                            <input type="text" id="checkout-name" placeholder="T√™n ng∆∞·ªùi nh·∫≠n" required>
                                        </div>
                                        <div class="filter-group">
                                            <label for="checkout-phone">S·ªë ƒêi·ªán Tho·∫°i:</label>
                                            <input type="tel" id="checkout-phone" placeholder="S·ªë ƒëi·ªán tho·∫°i" required>
                                        </div>
                                        
                                        <div class="filter-group" style="min-width: 100%;">
                                            <label for="checkout-address">ƒê·ªãa ch·ªâ Giao h√†ng Chi ti·∫øt:</label>
                                            <textarea id="checkout-address" rows="3" placeholder="ƒê·ªãa ch·ªâ chi ti·∫øt" required></textarea>
                                        </div>
                                        
                                        <div id="account-address-display" class="alert alert-warning" style="display: block; margin-top: 15px;">
                                            **ƒê·ªãa ch·ªâ M·∫∑c ƒë·ªãnh:** <span id="default-address-text"></span>
                                        </div>
                                
                                    </div>
                                </div>
                    
                                <div class="filter-section" style="margin-top: 30px;">
                                    <h4 style="color: #E74C3C; margin-bottom: 15px;">Ph∆∞∆°ng th·ª©c Thanh to√°n</h4>
                                    <select id="checkout-payment-method" style="padding: 10px; width: 100%; border: 1px solid #ccc; border-radius: 4px;">
                                        <option value="cod">Thanh to√°n ti·ªÅn m·∫∑t khi nh·∫≠n h√†ng (COD)</option>
                                        <option value="transfer">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
                                        <option value="online">Thanh to√°n tr·ª±c tuy·∫øn</option>
                                    </select>
                                </div>
                            </div>
                    
                            <div class="checkout-right-column">
                                
                                <div class="data-table" style="margin-top: 30px;">
                                    <h4 style="margin-bottom: 15px;">Chi ti·∫øt ƒê∆°n h√†ng (<span id="checkout-total-items">0</span> s·∫£n ph·∫©m)</h4>
                                    <table>
                                        <thead>
                                            <tr><th>S·∫£n ph·∫©m</th><th>SL</th><th>Gi√°</th><th>Th√†nh ti·ªÅn</th></tr>
                                        </thead>
                                        <tbody id="checkout-order-details">
                                        </tbody>
                                    </table>
                                    <h4 style="padding: 15px; text-align: right; background: #f9f9f9; border-top: 1px solid #ddd;">
                                        T·ªïng ti·ªÅn thanh to√°n: <span id="checkout-total-amount" style="color: #E74C3C; font-weight: 700;">0 ƒë</span>
                                    </h4>
                                </div>
                                
                                <div style="text-align: right; margin-top: 25px;">
                                    <button class="btn btn-primary btn-lg" onclick="placeOrder()">X√°c nh·∫≠n ƒê·∫∑t h√†ng</button>
                                </div>
                            </div>
                            
                        </div>
                    </div>

                    <div id="profile" class="client-view" style="padding: 20px;">
                        <header id="profile-header">
                            <span id="profile-back-btn" onclick="backToHomeFromProfile()">
                                <i class="fas fa-arrow-left"></i>
                            </span>
                            <h3 style="margin: 0; font-size: 1.8em; color: #E74C3C;">T√†i kho·∫£n c·ªßa b·∫°n</h3>
                        </header>
                        
                        <div style="padding-top: 50px;">
                            <h4 id="current-username" style="color: #E74C3C; margin-bottom: 20px;"></h4>
                            
                            <div class="filter-section" style="margin-top: 20px;">
                                <h3>üë§ H·ªì s∆° Kh√°ch h√†ng</h3> 
                                <h4 style="color: #2980b9;">Th√¥ng tin T√†i kho·∫£n</h4>
                                
                                <div id="address-view" style="margin-top: 15px;">
                                    <p><strong>Email:</strong> <span id="profile-email"></span></p>
                                    <p><strong>S·ªë ƒêi·ªán Tho·∫°i:</strong> <span id="profile-phone"></span>
                                        <button class="btn btn-info btn-sm" onclick="toggleEditPhone(true)" style="margin-left: 10px;">S·ª≠a SƒêT</button>
                                    </p>
                                    <p><strong>ƒê·ªãa ch·ªâ M·∫∑c ƒë·ªãnh:</strong> <span id="profile-address"></span>
                                        <button class="btn btn-info btn-sm" onclick="toggleEditAddress(true)" style="margin-top: 10px;">Ch·ªânh s·ª≠a ƒê·ªãa ch·ªâ</button>
                                    </p>
                                </div>

                                <div id="phone-edit-form" style="display: none; margin-top: 15px;">
                                    <label>S·ªë ƒêi·ªán Tho·∫°i M·ªõi:</label>
                                    <input type="tel" id="edit-phone-input" style="width: 100%; padding: 8px; margin-bottom: 10px;" placeholder="V√≠ d·ª•: 0901234567">
                                    <button class="btn btn-success btn-sm" onclick="updatePhone()">L∆∞u SƒêT</button>
                                    <button class="btn btn-danger btn-sm" onclick="toggleEditPhone(false)">H·ªßy</button>
                                </div>
                    
                                <div id="address-edit-form" style="display: none; margin-top: 15px;">
                                    <label>ƒê·ªãa ch·ªâ M·ªõi:</label>
                                    <input type="text" id="edit-address-input" style="width: 100%; padding: 8px; margin-bottom: 10px;">
                                    <button class="btn btn-success btn-sm" onclick="updateAddress()">L∆∞u ƒê·ªãa ch·ªâ</button>
                                    <button class="btn btn-danger btn-sm" onclick="toggleEditAddress(false)">H·ªßy</button>
                                </div>
                            </div>
                            
                            <div class="data-table" style="margin-top: 30px;">
                                <h4 style="color: #2980b9;">L·ªãch s·ª≠ ƒê∆°n h√†ng</h4>
                                <table>
                                    <thead>
                                        <tr><th>M√£ ƒêH</th><th>Ng√†y ƒë·∫∑t</th><th>T·ªïng ti·ªÅn</th><th>T√¨nh tr·∫°ng</th><th>Thao t√°c</th></tr>
                                    </thead>
                                    <tbody id="client-order-history">
                                        <tr><td colspan="5" style="text-align: center;">Vui l√≤ng ƒêƒÉng nh·∫≠p ƒë·ªÉ xem l·ªãch s·ª≠.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal 1: ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω -->
    <div id="auth-modal" class="modal" onclick="closeModalOutside(event)">
        <div class="modal-content">
            <span class="close-btn" onclick="closeAuthModal()">&times;</span>
            <div id="auth-forms">
                <!-- Form ƒêƒÉng nh·∫≠p -->
                <div id="login-form-container" class="auth-box"> 
                    <h3>ƒêƒÉng nh·∫≠p</h3>
                    <input type="text" id="client-login-email" placeholder="Email" required>
                    <div class="password-wrapper">
                        <input type="password" id="client-login-password" placeholder="M·∫≠t kh·∫©u" required>
                        <i class="fas fa-eye toggle-password" onclick="togglePasswordVisibility('client-login-password', this)"></i>
                    </div>
                    <button class="btn btn-primary" onclick="clientLoginModal()">ƒêƒÉng nh·∫≠p</button>
                    <p class="switch-auth" onclick="switchAuthModal('register')">Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω ngay.</p>
                </div>
    
                <!-- Form ƒêƒÉng k√Ω -->
                <div id="register-form-container" class="auth-box">
                    <h3>ƒêƒÉng k√Ω T√†i kho·∫£n</h3>
                    <input type="text" id="client-register-name" placeholder="H·ªç v√† t√™n" required>
                    <input type="email" id="client-register-email" placeholder="Email" required>
                    <div class="password-wrapper">
                        <input type="password" id="client-register-password" placeholder="M·∫≠t kh·∫©u" required>
                        <i class="fas fa-eye toggle-password" onclick="togglePasswordVisibility('client-register-password', this)"></i>
                    </div>
                    <div class="password-wrapper">
                        <input type="password" id="client-register-confirm-password" placeholder="X√°c nh·∫≠n M·∫≠t kh·∫©u" required>
                        <i class="fas fa-eye toggle-password" onclick="togglePasswordVisibility('client-register-confirm-password', this)"></i>
                    </div>
                    <button class="btn btn-success" onclick="clientRegisterModal()">ƒêƒÉng k√Ω</button>
                    <p class="switch-auth" onclick="switchAuthModal('login')">ƒê√£ c√≥ t√†i kho·∫£n? ƒêƒÉng nh·∫≠p.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal 2: Chi ti·∫øt S·∫£n ph·∫©m -->
    <div id="product-detail-modal" class="modal" onclick="closeModalOutside(event)">
        <div class="modal-content" id="product-detail-content" style="max-width: 800px;">
            
        </div>
    </div>
    
    <!-- Modal 3: GI·ªé H√ÄNG -->
    <div id="cart-modal" class="modal cart-modal-sidebar" onclick="closeModalOutside(event)">
        <div class="modal-content" style="max-width: 450px; padding: 0;">
            <div class="cart-header">
                <h3>üõí Gi·ªè h√†ng c·ªßa b·∫°n</h3>
                <span class="close-btn" onclick="closeCartModal()">&times;</span>
            </div>

            <div class="cart-body">
                <div id="cart-details-table">
                </div>
                
                <div id="checkout-section">
                    <div style="text-align: right; margin-top: 20px; padding: 10px 0;">
                        <button class="btn btn-success btn-lg" onclick="goToCheckout()">Thanh to√°n</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="inventory-history-modal" class="modal" onclick="closeModalOutside(event)">
        <div class="modal-content" id="inventory-history-content" style="max-width: 850px;">
            </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
